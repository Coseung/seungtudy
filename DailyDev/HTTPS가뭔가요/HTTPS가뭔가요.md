HTTP와 HTTPS 들어봤는데 HTTPS가 더 보안이 좋다 라고만 생각 했었다 정작 HTTPS 를 알아 보지 못하였는데 우리 학교 수강신청 사이트는 HTTPS로 접속하면 브라우저 경고가 뜨고 왜 HTTP로 들어가면 들어가질까 에서 찾아보았다.

## HTTP
![](https://velog.velcdn.com/images/dreamdp01/post/7cceade6-20bd-41eb-8ce5-8cc30e281933/image.png)

HyperText Transfer Protocol의 약자로 서로다른 시스템들 사이에서 통신을 주고받게 하는 기본적인 프로토콜 이고 서버에서 브라우저로 데이터를 전송하는 용도로 가장 많이 사용한다. 

HTTP 의 구성은 start line(Method, Path, Version), headers, body 등 으로 이루어져있다.  ![](https://velog.velcdn.com/images/dreamdp01/post/ea03ec8e-1470-4c39-bc03-cc68a7136ce0/image.png)



그런데 기본적인 프로토콜 이고 서버에서 브라우저로 데이터를 전송하는 용도로 가장 많이 사용 하지만 HTTP는 **암호화가 되지 않은 평문 데이터를 전송**하는 프로토콜이기 때문에, HTTP로 **비밀번호나 주민등록번호** 등을 주고 받으면 제3자가 정보를 조회할 수 있다.

![](https://velog.velcdn.com/images/dreamdp01/post/b1705ead-d9cf-480a-b806-cdee3127b060/image.jpeg)


---
## HTTPS 
![](https://velog.velcdn.com/images/dreamdp01/post/8b2a67b4-9c19-4654-8796-711095179a7c/image.png)

HTTPS는 HyperText Transfer Protocol Secure의 약자로, 기존의 **HTTP 프로토콜에 SSL(TLS)**이라는 보안 계층을 추가하여 데이터 보안을 강화한 것이다
![](https://velog.velcdn.com/images/dreamdp01/post/672a2646-3caa-48e5-b9b4-f57d69e9afc7/image.png)

**HTTP는 텍스트를 평문으로 그대로 전송**하기 때문에 중간에 패킷을 가로채면 내용을 바로 확인 할 수 있다. 반면에 **HTTPS는 데이터를 암호화 하여 전송**하기 때문에 네트워크 상에서 제 3자가 데이터를 가로채더라도 그 내용을 해석할 수 없다.

---
## SSL/TLS란?
SSL, Secure Sockets Layer은 웹서버와 웹 브라우저 간의 안전한 통신을 위해 만들어진 암호화 프로토콜이다. (현재는 SSL의 업그레이드 버전인 TLS(Transport Layer Security를 표준으로 사용함)

SSL은 데이터를 암호화 하기 위해 **대칭키 암호화 방식**과 **공개키(비대칭키) 암호화 방식**을 혼합하여 사용한다.

---
## 대칭키 가 뭔데요?
![](https://velog.velcdn.com/images/dreamdp01/post/52ca9948-6064-4832-8d7e-6f0cfc76723c/image.png)

대칭키는 암호화 복호화에 **동일한 키**를 사용하는 방식이다.
속도가 빠르다는 장점이 있고 키를 전달하는 과정에서 키가 탈취되면 함호화된 통신 내용을 제 3자가 다 풀어서 볼 수 있다. 끔찍

---
## 그럼 공개키는 뭘까~요 
![](https://velog.velcdn.com/images/dreamdp01/post/3a6d43d2-e196-4994-a3bc-c27c3f8a9086/image.png)

암호화와 복호화에 **서로 다른 키**를 사용하는 방식이다.
- **공개키**: 누구나 가질 수 있고 데이터를 암호화 하는데 사용한다.
- **개인키** : 소유자만 가지고 있어야 하고 공개키로 암호화된 데이터를 복호화하는데 사용한다.
A가 B에게 데이터를 보낼때, B 공개키로 암호화 하여 보내면 B는 자신의 개인키로만 복호화 할 수 있다.

키 탈취 문제를 해결할 수 있어 보안성이 높다는 장점이 있고 대칭키 방식에 비해 연산 속도가 느리다는 단점이있다.

---
## SSL의 통신과정
HTTPS는 속도와 보안을 모두 잡기 위해, 연결 수립 과정에서는 공개키 방식을 사용하고, 실제 데이터 전송 시에는 대칭키 방식을 사용한다. 
![](https://velog.velcdn.com/images/dreamdp01/post/16d56a63-56f5-4922-a6a2-20f09a134efe/image.png)

1. **접속 요청**: A(클라이언트/브라우저)가 B(서버)에 접속을 요청한다.

2. **공개키 전송**: B는 자신의 공개키가 포함된 인증서를 A에게 보낸다.

3. **대칭키 생성**: A는 앞으로의 통신 내용을 암호화할 **'대칭키'**를 생성한다.

4. **키 암호화 및 전달**: A는 생성한 **'대칭키'**를 B가 준 **'공개키'**를 사용하여 암호화한 뒤, B에게 전송한다. (이 데이터는 B의 개인키가 없으면 복호화할 수 없다.)

5. **대칭키 복호화**: B는 자신의 **'개인키'**로 암호문(암호화된 대칭키)을 복호화하여 A가 만든 **'대칭키'**를 획득한다.

6. **보안 통신 시작**: 이제 A와 B는 동일한 **'대칭키'**를 공유하게 되었으므로, 이후 전송되는 데이터는 이 대칭키를 이용해 암호화/복호화하여 빠르게 통신한다.

---
## 학교의 HTTP
처음 가졌던 의문으로 돌아가보면 HTTPS로 접속하면 경고가뜨고 HTTP로 접속하면 들어가지던 이유는 내가 생각 했을때는 신뢰 할 수 없는 기관에서 발급 된 이유가 큰것같다. 

Let's Encrypt 같은 곳에서 이 SSL 인증서를 무료로 발급받아서 적용 할 수 있는데 왜 HTTP 로 한것일까? 대규모인 서비스 인증서는 비싼가?

>귀찮아서일까.. 

파고 들어보면 인증서를 발급 받아 적용할 수 없던 이유가 있겠지만 학교의 수강신청사이트를 유지하고 오래동안 학생들에게 사용하게 하려면 인증서는 필수 인것같다.

---
## 마무리
HTTPS 는 HTTP에 보안 을 붙혔어요 가 끝이 아니라 데이터의 기밀성과 서버의 인증을 보장하는 필수 프로토콜이다.

단순히 HTTPS 설정을 적용하는 것 말고 대칭키와 공개키가 혼합 되어있고 핸드쉐이크 과정을 이해하고 있어야 추후 발생할 수 있는 인증서 관련 오류나 CORS문제등에 정확하게 대응할 수 있다.